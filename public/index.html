<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContextArea</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 100%;
            overflow: hidden;
        }

        #editor {
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="editor"></div>

    <script src="https://unpkg.com/monaco-editor@0.44.0/min/vs/loader.js"></script>
    <script src="contextarea.js"></script>
    <script>
        require.config({ paths: { vs: 'https://unpkg.com/monaco-editor@0.44.0/min/vs' } });
        require(['vs/editor/editor.main'], function () {
            ContextArea.create(document.getElementById('editor'), {
                pasteApiUrl: '/paste',
                contextApiUrl: '/context',
                value: [
                    '# ContextArea Demo',
                    '',
                    'A Monaco-based editor with built-in context awareness.',
                    '',
                    '## URL Context',
                    'Paste any raw-text URL and it becomes a live link with metadata.',
                    'Hover to see title, type, and token count. Click "Expand" to inline the content.',
                    '',
                    'Try it — here\'s a JSON file:',
                    'https://jsonplaceholder.typicode.com/todos/1',
                    '',
                    '## @Mentions',
                    'Type `@` to browse available MCP servers. Try it below:',
                    '',
                    '',
                    '',
                    '## Smart Paste',
                    'Paste any large block of text (>1000 chars) and it auto-uploads',
                    'to the pastebin, replacing inline with a short URL.',
                    'Hold Shift while pasting to skip this and paste raw.',
                    '',
                    '## Drag & Drop',
                    'Drop files anywhere on the editor to upload them.',
                    'Each file becomes a fetchable URL inserted at the cursor.',
                    '',
                    '## Submit (Shift+Enter)',
                    'Press Shift+Enter to trigger the onSubmit callback.',
                    'Try it now — it will log the editor content to the console.',
                ].join('\n'),
                onSubmit(value, ca) {
                    console.log('Submit:', value);
                    alert('Submitted! (' + value.length + ' chars)\n\nCheck the console for the full content.');
                },
                suggestions: [
                    { name: 'filesystem', url: 'https://github.com/modelcontextprotocol/servers/tree/main/src/filesystem', icon: `data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>')}`, description: 'Read, write, and manage local files and directories' },
                    { name: 'github', url: 'https://github.com/modelcontextprotocol/servers/tree/main/src/github', icon: 'https://cdn.simpleicons.org/github/white', description: 'Interact with GitHub repos, issues, PRs, and actions' },
                    { name: 'postgres', url: 'https://github.com/modelcontextprotocol/servers/tree/main/src/postgres', icon: 'https://cdn.simpleicons.org/postgresql/4169E1', description: 'Query and manage PostgreSQL databases' },
                    { name: 'slack', url: 'https://github.com/modelcontextprotocol/servers/tree/main/src/slack', icon: 'https://cdn.simpleicons.org/slack', description: 'Send messages and interact with Slack workspaces' },
                    { name: 'puppeteer', url: 'https://github.com/modelcontextprotocol/servers/tree/main/src/puppeteer', icon: 'https://cdn.simpleicons.org/puppeteer/00D8A2', description: 'Browser automation, screenshots, and web scraping' },
                    { name: 'memory', url: 'https://github.com/modelcontextprotocol/servers/tree/main/src/memory', icon: `data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M2 9h2"/><path d="M20 15h2"/><path d="M20 9h2"/><path d="M9 2v2"/><path d="M9 20v2"/></svg>')}`, description: 'Persistent knowledge graph for long-term memory' },
                    { name: 'brave-search', url: 'https://github.com/modelcontextprotocol/servers/tree/main/src/brave-search', icon: 'https://cdn.simpleicons.org/brave/FB542B', description: 'Web and local search via Brave Search API' },
                    { name: 'fetch', url: 'https://github.com/modelcontextprotocol/servers/tree/main/src/fetch', icon: `data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>')}`, description: 'Fetch and extract content from URLs' },
                ],
            });
        });
    </script>
</body>

</html>